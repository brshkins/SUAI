from django.shortcuts import render
from collections import defaultdict

# 12 вопросов с вариантами RIASEC
questions = {
    1: {
        "text": "Какое занятие тебе кажется наиболее привлекательным?",
        "variants": {
            "R": "Починить сломанный механизм",
            "I": "Провести научное исследование",
            "A": "Нарисовать иллюстрацию",
            "S": "Выслушать человека в трудной ситуации",
            "E": "Организовать мероприятие",
            "C": "Упорядочить документы"
        }
    },
    2: {
        "text": "Как ты предпочитаешь решать проблемы?",
        "variants": {
            "R": "С практической стороны",
            "I": "Анализируя причины",
            "A": "Используя нестандартное мышление",
            "S": "Советуясь с другими",
            "E": "Принимая решения быстро",
            "C": "Следуя инструкциям"
        }
    },
    3: {
        "text": "Какое занятие тебе ближе всего?",
        "variants": {
            "R": "Работать руками (ремонт, строительство)",
            "I": "Решать сложные задачи",
            "A": "Творить (писать, петь, играть)",
            "S": "Обучать и помогать",
            "E": "Управлять и продавать идеи",
            "C": "Работать с бумагами и данными"
        }
    },
    4: {
        "text": "Что ты делаешь в свободное время?",
        "variants": {
            "R": "Что-нибудь мастерю",
            "I": "Читаю или изучаю новое",
            "A": "Занимаюсь творчеством",
            "S": "Общаюсь с друзьями",
            "E": "Занимаюсь проектами",
            "C": "Навожу порядок"
        }
    },
    5: {
        "text": "Какая работа кажется тебе наиболее интересной?",
        "variants": {
            "R": "Техник или инженер",
            "I": "Аналитик или учёный",
            "A": "Дизайнер или актёр",
            "S": "Педагог или психолог",
            "E": "Менеджер или предприниматель",
            "C": "Бухгалтер или администратор"
        }
    },
    6: {
        "text": "Что тебя больше всего мотивирует?",
        "variants": {
            "R": "Создавать что-то реальное",
            "I": "Понимать, как всё устроено",
            "A": "Самовыражение",
            "S": "Чувство, что помог другим",
            "E": "Достижение целей",
            "C": "Чёткая структура"
        }
    },
    7: {
        "text": "Что тебе легче всего даётся?",
        "variants": {
            "R": "Использовать инструменты",
            "I": "Делать выводы",
            "A": "Фантазировать",
            "S": "Сочувствовать",
            "E": "Вдохновлять людей",
            "C": "Поддерживать порядок"
        }
    },
    8: {
        "text": "Как ты принимаешь решения?",
        "variants": {
            "R": "На основе опыта",
            "I": "Логически и обоснованно",
            "A": "Интуитивно",
            "S": "С учётом чувств других",
            "E": "Смело и быстро",
            "C": "По правилам"
        }
    },
    9: {
        "text": "Какую роль ты обычно берешь в группе?",
        "variants": {
            "R": "Реализую идеи руками",
            "I": "Обдумываю и анализирую",
            "A": "Предлагаю креативные решения",
            "S": "Поддерживаю и помогаю",
            "E": "Руководитель и мотиватор",
            "C": "Организую процесс"
        }
    },
    10: {
        "text": "Как ты предпочитаешь работать?",
        "variants": {
            "R": "В реальном физическом мире",
            "I": "С данными и гипотезами",
            "A": "С идеями и образами",
            "S": "С людьми и чувствами",
            "E": "С проектами и задачами",
            "C": "С правилами и процедурами"
        }
    },
    11: {
        "text": "Какие качества ты ценишь в работе?",
        "variants": {
            "R": "Практическая польза",
            "I": "Интеллектуальный вызов",
            "A": "Креативность",
            "S": "Забота о других",
            "E": "Лидерство",
            "C": "Порядок и точность"
        }
    },
    12: {
        "text": "Где бы ты хотел оказаться через 5 лет?",
"variants": {
            "R": "На производстве или в мастерской",
            "I": "В лаборатории или исследовательском центре",
            "A": "На сцене или в студии",
            "S": "В школе или центре помощи",
            "E": "Во главе команды",
            "C": "В офисе с чёткими задачами"
        }
    },
}
def index(request):
    return render(request, 'main/index.html')

def test_views(request):
    return render(request, 'main/test.html', {'questions': questions})


def test_result(request):
    if request.method == 'POST':
        scores = defaultdict(int)
        for i in range(1, 13):
            answer = request.POST.get(f'q{i}')
            if answer in 'RIASEC':
                scores[answer] += 1

        sorted_result = sorted(scores.items(), key=lambda x: x[1], reverse=True)
        return render(request, 'main/test_result.html', {'result': sorted_result})

    return render(request, 'main/test.html', {'questions': questions})

